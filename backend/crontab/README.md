# 定时任务说明

本目录存放定时任务类文件，基于 `topthink/think-crontab` 实现。

## 任务列表

| 任务名称 | 类文件 | 执行时间 | 说明 |
|---------|--------|---------|------|
| 清理过期缓存 | ClearCacheTask.php | 每天0点 | 清理Redis中过期的缓存数据 |
| 归档操作日志 | ArchiveLogTask.php | 每周日2点 | 将30天前的操作日志归档到历史表 |

## Cron表达式说明

```
*    *    *    *    *
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    └── 星期几 (0-7, 0和7都表示周日)
│    │    │    └────── 月份 (1-12)
│    │    └─────────── 日期 (1-31)
│    └──────────────── 小时 (0-23)
└───────────────────── 分钟 (0-59)
```

## 配置文件

定时任务配置位于 `config/crontab.php`，包含：
- `enable`: 是否启用定时任务
- `tasks`: 任务列表配置

## 手动执行

可通过命令行手动执行定时任务：

```bash
# 清理缓存
php think cron:run ClearCacheTask

# 归档日志
php think cron:run ArchiveLogTask
```

## 添加新任务

1. 在本目录创建任务类文件
2. 在 `config/crontab.php` 中添加任务配置
3. 实现 `execute()` 方法
